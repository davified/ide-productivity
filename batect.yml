containers:
  dev:
    build_directory: .
    volumes:
      - local: .
        container: /code
      - type: cache
        name: python-dev-dependencies
        container: /code/.venv
      - type: cache
        name: poetry-cache-and-artifacts
        container: /root/.cache/pypoetry
    build_target: dev

tasks:
  setup:
    description: Install Python dependencies
    run:
      container: dev
      command: ./scripts/setup.sh

  start-dev-container:
    description: Start containerised development environment
    run:
      container: dev
      command: bash
